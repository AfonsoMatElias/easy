<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <link rel="shortcut icon" href="../../assets/ico/main_ico.png" type="image/x-icon">
    <title>Easy Lib Sample</title>
</head>

<body>
    
    <div id="app">
        
        <div id="main-div-container">
    
            <div class="modal-control">
                <div><label>Product</label></div>
                <div><select ><!-- It's just to show with 'select' tag -->
                    <option e-tmp="Product" value="-e-Id-">-e-Name-</option>
                </select></div>
            </div>
            
            <div class="modal-control">
                <br>
                <div><label><b>Id</b> of the element t be updated </label></div>
                <div><input type="text" id="ElemId" placeholder="Id" /></div>
            </div>
    
            <form id="medicine-form" >
                <div class="modal-control">
                    <div>
                        <h4>Test Form, scrolldown to see the output</h4>
                    </div>
                </div>
    
                <div class="modal-control">
                    <div><label>Name</label></div>
                    <div><input type="text" name="Name" placeholder="Car" /></div>
                </div>
    
                <div class="modal-control">
                    <div><label>Price</label></div>
                    <div><input type="number" name="Price" placeholder="150" /></div>
                </div>
    
                <div class="modal-control">
                    <div><label>Stock</label></div>
                    <div><input type="number" name="Stock" placeholder="10" /></div>
                </div>
    
                <div class="modal-control">
                    <div><label>Description</label></div>
                    <div>
                        <textarea name="Description" placeholder="Description" rows="4"></textarea>
                    </div>
                </div>
                <div class="modal-control">
                    <div><label>Aditionals</label></div>
                    <div>
                        <textarea name="Aditionals" placeholder="Adicionais" rows="2"></textarea>
                    </div>
                </div>
    
                <div class="modal-control">
                    <div><label>Cor</label></div>
                    <div><input name="Color" placeholder="Red" /></div>
                </div>
                <br>
                <div><h3>Category</h3></div>
                <div e-build="Category">
                    <div class="modal-control">
                        <div><label>Name</label></div>
                        <div><input name="Name" placeholder="Vehicle" /></div>
                    </div>
                </div>
    
                <div class="modal-control">
                    <div class="modal-control-button">
                        <button type="submit" id="save" class="save-medicine">Save</button>
                        <button type="submit" id="update" class="update-medicine">Update</button>
                        <button id="send" class="close-modal" type="button">Cancel</button>
                    </div>
                </div>
    
            </form>

        </div>
        <!-- Single -->
    
        <div class="prod-list-item filled" 
             e-fill="Product:P0001"
             style="border:1px solid -e-Color-">
            <div class="img" e-style="background-color:-e-Color-"></div>
            <div class="text-content">
                <div class="top-text-content">
                    <div class="info-m">
                        <div class="info">
                            <b><label>-e-Name-</label></b>
                        </div>
                        <div class="info">
                            <label> -e-Category.Name- </label>
                        </div>
                    </div>
                    <div class="info-m">
                        <div class="info">
                            <label>Price -e-Price- $</label>
                        </div>
                        <div class="info">
                            <label> -e-Stock- </label> : <label> -e-Id- </label>
                        </div>
                    </div>
    
                </div>
                <div class="bottom-text-content">
                    <div class="info-max">
                        <label> -e-Description- </label>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- List -->
        <div id="prod-list">
            <div class="prod-list-item listed"
                 modeid="-e-Id-" 
                 e-tmp="Product"
                 e-anm="up"
                 title="Clique duas vezes para remover o item."
                 on:dblclick="removeElem(Id)">
                <div class="img" e-style="background-color:-e-Color-">
                </div>
                <div class="text-content">
                    <div class="top-text-content">
                        
                        <div class="info-m">
                            <div class="info">
                                <b><label>-e-Name-</label></b>
                            </div>
                            <div class="info">
                                <label>-e-Category.Name-</label>
                            </div>
                        </div>
                        <div class="info-m">
                            <div class="info">
                                <label>-e-Price-</label>
                            </div>
                            <div class="info">
                                <label>-e-Stock-</label> : <label>-e-Id-</label>
                            </div>
                        </div>
    
                    </div>
                    <div class="bottom-text-content">
                        <div class="info-max">
                            <label>-e-Description-</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Scripts -->
    <!-- The order is really important, easy.js always is imported first -->
    <script src="../../easy.js"></script>
    <script src="../../easy.db.js"></script>

    <script>

        /* I took this page and the styles in other sample project
        reason why you see medicine-form and other stuffs..
        */
        
        /**
         * Easy main object
         */
        const easy = new Easy('#app');

        let rootTable = 'Product';

        // A shortcut for document
        let doc = document;

        doc.listen('DOMContentLoaded', () => {

            // Preventing the default form action
            doc.node('#medicine-form').listen('submit', e => e.preventDefault());
    
            // Save event
            doc.node('#save').listen('click', async e => {
                console.log(await easy.create(rootTable, '#medicine-form', true));
                console.log('Created, list: ', await easy.read(rootTable));
            });
            
            // Update event
            doc.node('#update').listen('click', async e => {
                var id = doc.node('#ElemId').value;
                console.log(await easy.update(rootTable, '#medicine-form', id));
                console.log('Updated, list: ', await easy.read(rootTable));
            });    

        });

        // remove event
        async function removeElem(id) {
            let res = await easy.delete(rootTable, id);
            console.log('Removed', res, 'list: ', await easy.read(rootTable));
        } 

    </script>
</body>

</html>
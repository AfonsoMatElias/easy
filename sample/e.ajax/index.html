<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <link rel="shortcut icon" href="../../assets/ico/main_ico.png" type="image/x-icon">
    <title>Easy Lib Sample</title>
</head>

<body>
    
    <div id="app">
        
        <div id="main-div-container">
    
            <div class="modal-control">
                <div style="text-align: center;" > <label> Scroll down to see the listed items. </label> </div>
                <br>
                <div><label><b>Id</b> of the element to be updated </label></div>
                <div><input type="text" id="ElemId" placeholder="Id" /></div>
            </div>
    
            <form id="default-form" >
                <div class="modal-control">
                    <div>
                        <h4>Test Form</h4>
                    </div>
                </div>
    
                <div class="modal-control">
                    <div><label>Name</label></div>
                    <div><input type="text" name="name" placeholder="myname" /></div>
                </div>
    
                <div class="modal-control">
                    <div><label>Username</label></div>
                    <div><input type="text" name="username" placeholder="myalias" /></div>
                </div>
    
                <div class="modal-control">
                    <div><label>Email</label></div>
                    <div><input type="email" name="email" placeholder="myalias@domain.com" /></div>
                </div>
    
                <div e-build="address">
                    <br>
                    <label for=""> Address </label>
                    <div class="modal-control">
                        <div><label>Street</label></div>
                        <div><input type="text" name="street" placeholder="mystreet" /></div>
                    </div>
                    
                    <div class="modal-control">
                        <div><label>City</label></div>
                        <div><input type="text" name="city" placeholder="mycity" /></div>
                    </div>
                    
                    <div class="modal-control">
                        <div><label>Suite</label></div>
                        <div><input type="text" name="suite" placeholder="Apt. 000" /></div>
                    </div>
                    
                    <div class="modal-control">
                        <div><label>Zipcode</label></div>
                        <div><input type="text" name="zipcode" placeholder="00000-0000" /></div>
                    </div>
    
                </div>
    
                <div e-build="address.geo">
                    <br>
                    <label for=""> Geo </label>
                    <div class="modal-control">
                        <div><label>Latitude</label></div>
                        <div><input type="text" name="lat" placeholder="0.00" /></div>
                    </div>
                    <div class="modal-control">
                        <div><label>Longitude</label></div>
                        <div><input type="text" name="lng" placeholder="0.00" /></div>
                    </div>
    
                </div>
    
                <div class="modal-control">
                    <div><label>Phone</label></div>
                    <div><input type="text" name="phone" placeholder="+000 000 000 000" /></div>
                </div>
    
                <div class="modal-control">
                    <div><label>Website</label></div>
                    <div><input type="text" name="website" placeholder="www.domain.com" /></div>
                </div>
    
                <div e-build="company">
                    <br>
                    <label for=""> Company </label>
                    <div class="modal-control">
                        <div><label>Name</label></div>
                        <div><input type="text" name="name" placeholder="mycompany" /></div>
                    </div>
                    
                    <div class="modal-control">
                        <div><label>Catch Phrase</label></div>
                        <div><input type="text" name="catchPhrase" placeholder="something..." /></div>
                    </div>
                    
                    <div class="modal-control">
                        <div><label>BS</label></div>
                        <div><input type="text" name="bs" placeholder="something..." /></div>
                    </div>
    
                </div>
    
                <div class="modal-control">
                    <div class="modal-control-button">
                        <button type="submit" id="save" class="save-medicine">Save</button>
                        <button type="submit" id="update" class="update-medicine">Update</button>
                        <button id="send" class="close-modal" type="button">Cancel</button>
                    </div>
                </div>
    
            </form>
            <br />
            <div class="modal-control">
                <div><input type="text" id="Search" placeholder="Search..." /></div>
            </div>
            <br />
        </div>
        <!-- List -->
        <div id="prod-list">
    
            <div class="prod-list-item listed" 
                    e-tmp="users"
                    e-anm="up"
                    objid="-e-id-"
                    title="Click twice to remove">
    
                <div class="text-content">
                    <div class="top-text-content">
                        
                        <div class="info-m">
                            <div class="info">
                                <h3>
                                <b> 😎 <label>-e-name-</label></b>
    
                                </h3>
                            </div>
                            <div class="info">
                                <label>Email: -e-email-</label>
                            </div>
                        </div>
                        <div class="info-m">
                            <div class="info">
                                <label>-e-phone-</label>
                            </div>
                            <div class="info">
                                <label>Id: -e-id- </label>
                            </div>
                        </div>
    
                    </div>
                    <div class="bottom-text-content">
                        <div class="info-max">
                            <p e-field="Description">
                                This is an object with id '-e-id-' and a beautiful name '-e-name-', with this email address -e-email-.
                                It's located at lat: -e-address.geo.lat- | long: -e-address.geo.lng-. 😀
                            </p>
                        </div>
                    </div>
                </div>
    
            </div>
    
        </div>

    </div>

    <!-- Scripts -->
    <!-- The order is really important, easy.js always needs to be imported first -->
    <script src="../../easy.js"></script> 
    <script src="../../easy.ajax.js"></script>

    <script>

        let rootTable = 'users';

        // A shortcut for document
        const doc = document;

        /**
         * Easy main object
         */
         const easy = new Easy('#app');

        doc.listen('DOMContentLoaded', _ => {
            // Preventing the default form action
            doc.node('#default-form').listen('submit', e => e.preventDefault());
    
            // Save event
            doc.node('#save').listen('click', async _ => {
                console.log(await easy.create(rootTable, '#default-form', true));
                console.log('Created, list: ', await easy.read(rootTable));
            });
    
            // Update event
            doc.node('#update').listen('click', async _ => {
                var id = doc.node('#ElemId').value;
                console.log(await easy.update(rootTable, '#default-form', id));
                console.log('Updated, list: ', await easy.read(rootTable));
            });
    
            // remove event
            doc.nodes('.listed').listen('dblclick', async e => {
                let res = await easy.delete(rootTable, e.base.valueIn('objid'));
                console.log('Removed', res, 'list: ', await easy.read(rootTable));
            });
        });

    </script>

</body>

</html>